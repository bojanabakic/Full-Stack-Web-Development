{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Message.js","services/personsServices.js","App.js","index.js"],"names":["Filter","props","value","nameFilter","onChange","handleChange","PersonForm","onSubmit","addNewName","newName","handleNameChange","newNumber","handleNumberChange","type","Persons","personsFilter","map","x","name","number","onClick","deletePerson","id","Message","message","className","text","baseUrl","create","newObject","a","request","axios","post","then","response","data","remove","delete","update","put","getAll","get","operations","App","useState","persons","setPersons","setNameFilter","setPersonsFilter","setNewName","setNewNumber","setMessage","window","confirm","personsServices","filter","setTimeout","catch","useEffect","allPersons","event","target","console","log","person","toUpperCase","includes","preventDefault","personObject","some","match","find","updatedPerson","concat","returnedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0b82d9cb.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n        <p>filter shown with: <input\r\n        value={props.nameFilter}\r\n        onChange={props.handleChange} /></p>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.addNewName}>\r\n            <div>\r\n                name: <input\r\n                    value={props.newName}\r\n                    onChange={props.handleNameChange} />\r\n            </div>\r\n            <div>\r\n                number: <input\r\n                    value={props.newNumber}\r\n                    onChange={props.handleNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Persons = (props) => { \r\n    return (\r\n        <div>\r\n            {props.personsFilter.map(x =>\r\n            <p key={x.id}> {x.name} {x.number} {\" \"}\r\n                    <button onClick={() => props.deletePerson(x.name, x.id)}>delete</button></p>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst Message = (props) => {\r\n    if (props.message === null) return null\r\n  \r\n    return (\r\n      <div className={`message message_${props.message.type}`}>\r\n        {props.message.text}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Message","import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst create = async (newObject) => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = async (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = async (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\nconst getAll = async () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst operations = {\r\n    create, remove, update, getAll\r\n  };\r\n\r\nexport default operations\r\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Message from './components/Message'\nimport personsServices from './services/personsServices'\nimport './index.css'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [nameFilter, setNameFilter] = useState('')\n  const [personsFilter, setPersonsFilter] = useState(persons)\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [message, setMessage] = useState(null)\n\n  const addNewName = (event) => {\n    event.preventDefault()\n\n    /*if (persons.some(x => x.name === newName)) {\n        alert(`${newName} is already added to phonebook`)\n        return\n    }*/\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (persons.some(x => x.name === personObject.name)) {\n      const dialogBox = window.confirm(`${personObject.name} is already added to the phonebook, replace the old number with the new one?`)\n\n      if (dialogBox) {\n        let match = persons.find(x => x.name === newName)\n\n        personsServices\n          .update(match.id, { ...match, number: newNumber })\n          .then(updatedPerson => {\n            setPersons(persons.map(x => x.id !== updatedPerson.id ? x : updatedPerson))\n            setMessage({text:`${match.name}'s number successfully updated`, type:\"success\"})\n            setNewName('')\n            setNewNumber('')\n            setTimeout(() => {\n              setMessage(null)\n            }, 3000)\n          })\n          .catch(() => {\n            setMessage({text:`${match.name}'s number cannot be updated.`, type:\"failed\"})\n            setTimeout(() => {\n              setMessage(null)\n            }, 3000)\n          })\n        setPersons(persons.concat(personObject))\n      }\n    } else {\n      personsServices\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setMessage({text:`${personObject.name} is successfully added to phonebook!`, type:\"success\"})\n          setNewName('')\n          setNewNumber('')\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        })\n        .catch(() => {\n          setMessage({text:`${personObject.name} cannot be added to phonebook.`, type:\"fail\"})\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        })\n    }\n  }\n\n  const deletePerson = (name, id) => {\n    const dialogBox = window.confirm(`Delete ${name}`)\n\n    if (dialogBox) {\n      personsServices\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter(x => x.id !== id))\n          setMessage({text:`${name} is successfully deleted.`, type:\"success\"})\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        })\n        .catch(() => {\n          setMessage({text:`Person '${name}' was already deleted from server.`, type:\"fail\"})\n          setPersons(persons.filter(x => x.name !== name))\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  useEffect(() => {\n    personsServices\n      .getAll()\n      .then(allPersons => {\n        setPersons(allPersons)\n      })\n  }, [])\n\n  const handleChange = (event) => {\n    setNameFilter(event.target.value)\n    console.log(nameFilter)\n    setPersonsFilter(persons.filter((person) =>\n      (person.name.toUpperCase().includes(nameFilter.toUpperCase()))))\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} />\n      <Filter nameFilter={nameFilter} handleChange={handleChange} />\n      <h3>add a new</h3>\n      <PersonForm addNewName={addNewName} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n      {nameFilter === '' ?\n        <Persons personsFilter={persons} deletePerson={deletePerson} />\n        :\n        <Persons personsFilter={personsFilter} deletePerson={deletePerson} />}\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport React from 'react'\nimport App from './App.js'\n\nReactDOM.render(<App />,\n  document.getElementById('root'))"],"sourceRoot":""}