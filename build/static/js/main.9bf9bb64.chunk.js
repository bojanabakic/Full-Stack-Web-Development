(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(17),c=n.n(r),a=n(1),u=n(4),o=n(0),s=function(e){return Object(o.jsxs)("p",{children:["filter shown with: ",Object(o.jsx)("input",{value:e.nameFilter,onChange:e.handleChange})]})},i=function(e){return Object(o.jsxs)("form",{onSubmit:e.addNewName,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){return Object(o.jsx)("div",{children:e.personsFilter.map((function(t){return Object(o.jsxs)("p",{children:[" ",t.name," ",t.number," "," ",Object(o.jsx)("button",{onClick:function(){return e.deletePerson(t.name,t.id)},children:"delete"})]},t.id)}))})},d=function(e){return null===e.message?null:Object(o.jsx)("div",{className:"message message_".concat(e.message.type),children:e.message.text})},f=n(3),p=n.n(f),b=n(5),h=n(6),j=n.n(h),m="/api/persons",O=function(){var e=Object(b.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.post(m,t),e.abrupt("return",n.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(b.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.delete("".concat(m,"/").concat(t)),e.abrupt("return",n.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.a.put("".concat(m,"/").concat(t),n),e.abrupt("return",r.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.a.get(m),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w={create:O,remove:x,update:v,getAll:g},y=(n(43),function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),f=Object(u.a)(c,2),p=f[0],b=f[1],h=Object(a.useState)(n),j=Object(u.a)(h,2),m=j[0],O=j[1],x=Object(a.useState)(""),v=Object(u.a)(x,2),g=v[0],y=v[1],N=Object(a.useState)(""),k=Object(u.a)(N,2),C=k[0],S=k[1],T=Object(a.useState)(null),F=Object(u.a)(T,2),P=F[0],A=F[1],D=function(e,t){window.confirm("Delete ".concat(e))&&w.remove(t).then((function(){r(n.filter((function(e){return e.id!==t}))),A({text:"".concat(e," is successfully deleted."),type:"success"}),setTimeout((function(){A(null)}),3e3)})).catch((function(t){console.log(t.response.data),A({text:"".concat(t.response.data.error),type:"failed"}),r(n.filter((function(t){return t.name!==e}))),setTimeout((function(){A(null)}),3e3)}))};Object(a.useEffect)((function(){w.getAll().then((function(e){r(e)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(d,{message:P}),Object(o.jsx)(s,{nameFilter:p,handleChange:function(e){b(e.target.value),console.log(p),O(n.filter((function(e){return e.name.toUpperCase().includes(p.toUpperCase())})))}}),Object(o.jsx)("h3",{children:"add a new"}),Object(o.jsx)(i,{addNewName:function(e){e.preventDefault();var t={name:g,number:C};if(n.some((function(e){return e.name===t.name}))){if(window.confirm("".concat(t.name," is already added to the phonebook, replace the old number with the new one?"))){var c=n.filter((function(e){return e.name===t.name}))[0];w.update(c.id,t).then((function(){var e=n.filter((function(e){return e!==c}));e=e.concat(t),r(e),A({text:"".concat(c.name,"'s number successfully updated"),type:"success"}),y(""),S(""),setTimeout((function(){A(null)}),3e3)})).catch((function(e){console.log(e.response.data),A({text:"".concat(e.response.data.error),type:"failed"}),setTimeout((function(){A(null)}),3e3)})),r(n.concat(t))}}else w.create(t).then((function(e){r(n.concat(e)),A({text:"".concat(t.name," is successfully added to phonebook!"),type:"success"}),y(""),S(""),setTimeout((function(){A(null)}),3e3)})).catch((function(e){console.log(e.response.data),A({text:"".concat(e.response.data.error),type:"failed"}),setTimeout((function(){A(null)}),3e3)}))},newName:g,handleNameChange:function(e){y(e.target.value)},newNumber:C,handleNumberChange:function(e){S(e.target.value)}}),Object(o.jsx)("h3",{children:"Numbers"}),""===p?Object(o.jsx)(l,{personsFilter:n,deletePerson:D}):Object(o.jsx)(l,{personsFilter:m,deletePerson:D})]})});c.a.render(Object(o.jsx)(y,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.9bf9bb64.chunk.js.map