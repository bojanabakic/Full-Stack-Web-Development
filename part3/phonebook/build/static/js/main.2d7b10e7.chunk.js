(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(17),a=n.n(c),r=n(1),u=n(4),o=n(0),s=function(e){return Object(o.jsxs)("p",{children:["filter shown with: ",Object(o.jsx)("input",{value:e.nameFilter,onChange:e.handleChange})]})},i=function(e){return Object(o.jsxs)("form",{onSubmit:e.addNewName,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){return Object(o.jsx)("div",{children:e.personsFilter.map((function(t){return Object(o.jsxs)("p",{children:[" ",t.name," ",t.number," "," ",Object(o.jsx)("button",{onClick:function(){return e.deletePerson(t.name,t.id)},children:"delete"})]},t.id)}))})},d=function(e){return null===e.message?null:Object(o.jsx)("div",{className:"message message_".concat(e.message.type),children:e.message.text})},f=n(3),b=n.n(f),p=n(5),h=n(6),j=n.n(h),m="/api/persons",O=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.post(m,t),e.abrupt("return",n.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.delete("".concat(m,"/").concat(t)),e.abrupt("return",n.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(b.a.mark((function e(t,n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=j.a.put("".concat(m,"/").concat(t),n),e.abrupt("return",c.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.a.get(m),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g={create:O,remove:x,update:v,getAll:w},y=(n(43),function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),f=Object(u.a)(a,2),b=f[0],p=f[1],h=Object(r.useState)(n),j=Object(u.a)(h,2),m=j[0],O=j[1],x=Object(r.useState)(""),v=Object(u.a)(x,2),w=v[0],y=v[1],N=Object(r.useState)(""),k=Object(u.a)(N,2),C=k[0],S=k[1],T=Object(r.useState)(null),F=Object(u.a)(T,2),P=F[0],A=F[1],D=function(e,t){window.confirm("Delete ".concat(e))&&g.remove(t).then((function(){c(n.filter((function(e){return e.id!==t}))),A({text:"".concat(e," is successfully deleted."),type:"success"}),setTimeout((function(){A(null)}),3e3)})).catch((function(t){console.log(t.response.data),A({text:"Person '".concat(e,"' was already deleted from server."),type:"fail"}),c(n.filter((function(t){return t.name!==e}))),setTimeout((function(){A(null)}),3e3)}))};Object(r.useEffect)((function(){g.getAll().then((function(e){c(e)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(d,{message:P}),Object(o.jsx)(s,{nameFilter:b,handleChange:function(e){p(e.target.value),console.log(b),O(n.filter((function(e){return e.name.toUpperCase().includes(b.toUpperCase())})))}}),Object(o.jsx)("h3",{children:"add a new"}),Object(o.jsx)(i,{addNewName:function(e){e.preventDefault();var t={name:w,number:C};if(n.some((function(e){return e.name===t.name}))){if(window.confirm("".concat(t.name," is already added to the phonebook, replace the old number with the new one?"))){var a=n.filter((function(e){return e.name===t.name}))[0];g.update(a.id,t).then((function(){var e=n.filter((function(e){return e!==a}));e=e.concat(t),c(e),A({text:"".concat(a.name,"'s number successfully updated"),type:"success"}),y(""),S(""),setTimeout((function(){A(null)}),3e3)})).catch((function(e){console.warn(e),A({text:"".concat(a.name,"'s number cannot be updated."),type:"failed"}),setTimeout((function(){A(null)}),3e3)})),c(n.concat(t))}}else g.create(t).then((function(e){c(n.concat(e)),A({text:"".concat(t.name," is successfully added to phonebook!"),type:"success"}),y(""),S(""),setTimeout((function(){A(null)}),3e3)})).catch((function(e){console.log(e.response.data),A({text:"".concat(t.name," cannot be added to phonebook."),type:"fail"}),setTimeout((function(){A(null)}),3e3)}))},newName:w,handleNameChange:function(e){y(e.target.value)},newNumber:C,handleNumberChange:function(e){S(e.target.value)}}),Object(o.jsx)("h3",{children:"Numbers"}),""===b?Object(o.jsx)(l,{personsFilter:n,deletePerson:D}):Object(o.jsx)(l,{personsFilter:m,deletePerson:D})]})});a.a.render(Object(o.jsx)(y,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.2d7b10e7.chunk.js.map